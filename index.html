<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Configurateur Tradi’home</title>
  <style>
    body { margin:0; overflow:hidden; font-family:Arial,sans-serif; }
    #ui { position: fixed; top:0; left:0; padding:20px; background:rgba(255,255,255,0.8); max-width:300px; }
    button { display:block; width:100%; margin:5px 0; padding:8px; }
  </style>
</head>
<body>

  <canvas id="canvas"></canvas>
  <div id="ui">
    <h2>Configurer Tradi’home</h2>
    <!-- Exemple : Bardage -->
    <h3>Bardage (poutres)</h3>
    <button id="bardage_clair">Chêne clair</button>
    <button id="bardage_fonce">Chêne foncé</button>
    <button id="bardage_gris">Gris orage</button>
    <!-- … ajoute tes autres catégories de la même façon … -->
  </div>

  <script type="module">
    import * as THREE      from 'https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js';
    import { GLTFLoader }  from 'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/loaders/GLTFLoader.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/controls/OrbitControls.js';

    // 1) Scène, cam, renderer
    const canvas   = document.getElementById('canvas');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias:true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    const scene    = new THREE.Scene();
    scene.background = new THREE.Color(0xdddddd);

    const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(7,5,7);
    camera.lookAt(0,0,0);

    const controls = new OrbitControls(camera, renderer.domElement);

    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(10,15,10);
    scene.add(light);

    // 2) Charger le modèle
    let model; 
    new GLTFLoader().load(
      'model2.glb',
      gltf => {
        model = gltf.scene;
        scene.add(model);
        console.log('Meshes:',);
        model.traverse(o => o.isMesh && console.log(' -', o.name));
        animate();
      },
      xhr => console.log(`Loading ${ (xhr.loaded/xhr.total*100).toFixed(0) }%`),
      e   => console.error('GLTFLoader error:', e)
    );

    // 3) Fonction animate
    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }

    // 4) Exemple d’interaction — changer la baseColor de certains Meshes
    function setColor(names, hexColor) {
      if (!model) return;
      model.traverse(o => {
        if (o.isMesh && names.includes(o.name)) {
          o.material.color.set(hexColor);
        }
      });
    }

    document.getElementById('bardage_clair')
      .addEventListener('click', () => setColor([ 'poutrine01','poutrine02' ], 0xCEA660));

    document.getElementById('bardage_fonce')
      .addEventListener('click', () => setColor([ 'poutrine01','poutrine02' ], 0x8B5E3C));

    document.getElementById('bardage_gris')
      .addEventListener('click', () => setColor([ 'poutrine01','poutrine02' ], 0x2F2F2F));

    // … fais pareil pour tes murs, pergola, menuiserie, toit, etc. …
  </script>

</body>
</html>
